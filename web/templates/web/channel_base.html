{% extends 'web/base.html' %}
{% load static %}
{% load compress %}
{% load humanize %}

{% block title %}
	<title>{{ channel.name }} - Tracle</title>
{% endblock %}

{% block body %}
<div class=container>
	{% include 'web/includes/nav.html' %}
</div>
<div class="channel__container">
	<div class="container">
		{% if channel %}
		<div class="channel__header">
			<img class="channel__header__thumb" src="{% if channel.avatar %}{{ channel.avatar.url }}{% else %}{% static 'web/img/avatar.png' %}{% endif %}">
			<h1 class="channel__header__title">{{ channel.name }}
				{% if channel.verified %}
				<i class="fas fa-check channel__header__title__checkmark"></i>
				{% endif %}
			</h1>
			{% if user.is_admin %}<a href="/admin/backend/channel/{{ channel.id }}/change/" style="font-size: 1rem; color: #fff"><i class="far fa-edit"></i></a>{% endif %}
			<button id="btn-subscribe" class="channel__header__btn-subscribe" {% if not request.user.is_authenticated or request.channel.channel_id == channel.channel_id %} disabled {% else %} onclick="toggleSubscribe()" {% endif %}><i class="fas fa-plus-circle"></i><span id="btn-subscribe-text">{% if request.user.is_authenticated and is_subscribed %} Unsubscribe {% else %} Subscribe {% endif %}</button>
			<div class="channel__header__subscribers">
				<span id="sub-count">{{ channel.subscriptions.count }}</span>subscribers
			</div>
			<div class="channel__header__views">
				<span>{{ total_views }}</span> video views
			</div>
		</div>
		<div class="channel__nav">
			<div class="left">
				<a class="{% if selected_tab == 'featured' %}nav-link-selected{% else %}nav-link{% endif %}" href="{% url 'web_channel_featured' channel.channel_id %}">Featured</a><a class="{% if selected_tab == 'feed' %}nav-link-selected{% else %}nav-link{% endif %}" href="{% url 'web_channel_feed' channel.channel_id %}">Feed</a><a class="{% if selected_tab == 'videos' %}nav-link-selected{% else %}nav-link{% endif %}" href="{% url 'web_channel_videos' channel.channel_id %}">Videos</a>
			</div>
			<form class="right">
				<input /><button type="submit"><i class="fas fa-search"></i></button>
			</form>
		</div>
        {% block channel_body %}
        {% endblock %}
        {% else %}
            <div>Channel not found.</div>
		{% endif %}
        {% include 'web/includes/footer.html' %}
	</div>
</div>
{% csrf_token %}
<input id="channel_id" type="hidden" value="{{ channel.channel_id }}">
{% endblock %}

{% block script %}
{% endblock %}